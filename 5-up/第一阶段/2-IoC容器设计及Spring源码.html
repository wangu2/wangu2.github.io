<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IoC容器设计及Spring源码 | YOU CAN DO IT @ WANGU</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.57b1b43f.css" as="style"><link rel="preload" href="/assets/js/app.7efbe7ba.js" as="script"><link rel="preload" href="/assets/js/2.6911186c.js" as="script"><link rel="preload" href="/assets/js/20.e6073ffb.js" as="script"><link rel="prefetch" href="/assets/js/10.0dd62fe5.js"><link rel="prefetch" href="/assets/js/11.79010c3f.js"><link rel="prefetch" href="/assets/js/12.3e4763f5.js"><link rel="prefetch" href="/assets/js/13.7e1a5336.js"><link rel="prefetch" href="/assets/js/14.3fa1a476.js"><link rel="prefetch" href="/assets/js/15.f9994be5.js"><link rel="prefetch" href="/assets/js/16.289306ba.js"><link rel="prefetch" href="/assets/js/17.90f30f83.js"><link rel="prefetch" href="/assets/js/18.745e118b.js"><link rel="prefetch" href="/assets/js/19.bfba5612.js"><link rel="prefetch" href="/assets/js/21.53c46aba.js"><link rel="prefetch" href="/assets/js/22.6918c566.js"><link rel="prefetch" href="/assets/js/23.bdb07654.js"><link rel="prefetch" href="/assets/js/24.2208129a.js"><link rel="prefetch" href="/assets/js/25.7bfd10bc.js"><link rel="prefetch" href="/assets/js/26.9d2bd670.js"><link rel="prefetch" href="/assets/js/3.b0fe903f.js"><link rel="prefetch" href="/assets/js/4.9b4a50d5.js"><link rel="prefetch" href="/assets/js/5.5f3bf129.js"><link rel="prefetch" href="/assets/js/6.defbe399.js"><link rel="prefetch" href="/assets/js/7.7077d182.js"><link rel="prefetch" href="/assets/js/8.8142661f.js"><link rel="prefetch" href="/assets/js/9.67779462.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57b1b43f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YOU CAN DO IT @ WANGU</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基本的" class="dropdown-title"><span class="title">基本的</span> <span class="arrow down"></span></button> <button type="button" aria-label="基本的" class="mobile-dropdown-title"><span class="title">基本的</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-base/java/java-oop.html" class="nav-link">
  Java 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Spring" class="dropdown-title"><span class="title">Java Spring</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Spring" class="mobile-dropdown-title"><span class="title">Java Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#2" class="nav-link">
  //TODO IntelliJ IDEA
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Boot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/2-java-spring/Spring/SpringBoot/IDEA创建SpringBoot/1-idea-create-springboot.html" class="nav-link">
  Spring Boot - 多模块项目创建
</a></li><li class="dropdown-subitem"><a href="/#3" class="nav-link">
  //TODO Spring Boot - Helloword
</a></li><li class="dropdown-subitem"><a href="/#4" class="nav-link">
  //TODO Spring Boot - 多配置文件
</a></li><li class="dropdown-subitem"><a href="/#5" class="nav-link">
  //TODO Spring Boot - LogBack日志配置
</a></li><li class="dropdown-subitem"><a href="/#6" class="nav-link">
  //TODO Spring Boot - Swagger UI
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Security
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#7" class="nav-link">
  //TODO 初始化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/3-java-extends/中间件/RabbitMQ消息中间件/1-RabbitMQ-setup.html" class="nav-link">
  RabbitMQ 消息队列
</a></li><li class="dropdown-item"><!----> <a href="/3-java-extends/中间件/SpringBoot2.0集成Activiti6/1-springboot-activit-star.html" class="nav-link">
  Activiti6 工作流引擎
</a></li><li class="dropdown-item"><!----> <a href="/#8" class="nav-link">
  //TODO Shardingsphere 分库分表
</a></li><li class="dropdown-item"><!----> <a href="/#9" class="nav-link">
  //TODO Mybaits-Plus ORM 数据持久
</a></li><li class="dropdown-item"><!----> <a href="/#10" class="nav-link">
  //TODO Druid 连接池
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="翻过这座山" class="dropdown-title"><span class="title">翻过这座山</span> <span class="arrow down"></span></button> <button type="button" aria-label="翻过这座山" class="mobile-dropdown-title"><span class="title">翻过这座山</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/5-up/第一阶段/1-Mybaits源码解析.html" class="nav-link">
  1.1.持久层框架设计实现及MyBatis源码分析
</a></li><li class="dropdown-item"><!----> <a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html" class="nav-link">
  1.2.IoC容器设计实现及Spring源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/6-tools/OpenVPN/1-搭建-OpenVPN.html" class="nav-link">
  服务器搭建 OpenVPN
</a></li></ul></div></div><div class="nav-item"><a href="/6-tools/0-小工具集合.html" class="nav-link">
  集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏀" class="dropdown-title"><span class="title">🏀</span> <span class="arrow down"></span></button> <button type="button" aria-label="🏀" class="mobile-dropdown-title"><span class="title">🏀</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/0-life/basketball/1-day1.html" class="nav-link">
  球性训练计划
</a></li></ul></div></div><div class="nav-item"><a href="/关于.html" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基本的" class="dropdown-title"><span class="title">基本的</span> <span class="arrow down"></span></button> <button type="button" aria-label="基本的" class="mobile-dropdown-title"><span class="title">基本的</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-base/java/java-oop.html" class="nav-link">
  Java 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Spring" class="dropdown-title"><span class="title">Java Spring</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Spring" class="mobile-dropdown-title"><span class="title">Java Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#2" class="nav-link">
  //TODO IntelliJ IDEA
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Boot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/2-java-spring/Spring/SpringBoot/IDEA创建SpringBoot/1-idea-create-springboot.html" class="nav-link">
  Spring Boot - 多模块项目创建
</a></li><li class="dropdown-subitem"><a href="/#3" class="nav-link">
  //TODO Spring Boot - Helloword
</a></li><li class="dropdown-subitem"><a href="/#4" class="nav-link">
  //TODO Spring Boot - 多配置文件
</a></li><li class="dropdown-subitem"><a href="/#5" class="nav-link">
  //TODO Spring Boot - LogBack日志配置
</a></li><li class="dropdown-subitem"><a href="/#6" class="nav-link">
  //TODO Spring Boot - Swagger UI
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Security
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#7" class="nav-link">
  //TODO 初始化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/3-java-extends/中间件/RabbitMQ消息中间件/1-RabbitMQ-setup.html" class="nav-link">
  RabbitMQ 消息队列
</a></li><li class="dropdown-item"><!----> <a href="/3-java-extends/中间件/SpringBoot2.0集成Activiti6/1-springboot-activit-star.html" class="nav-link">
  Activiti6 工作流引擎
</a></li><li class="dropdown-item"><!----> <a href="/#8" class="nav-link">
  //TODO Shardingsphere 分库分表
</a></li><li class="dropdown-item"><!----> <a href="/#9" class="nav-link">
  //TODO Mybaits-Plus ORM 数据持久
</a></li><li class="dropdown-item"><!----> <a href="/#10" class="nav-link">
  //TODO Druid 连接池
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="翻过这座山" class="dropdown-title"><span class="title">翻过这座山</span> <span class="arrow down"></span></button> <button type="button" aria-label="翻过这座山" class="mobile-dropdown-title"><span class="title">翻过这座山</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/5-up/第一阶段/1-Mybaits源码解析.html" class="nav-link">
  1.1.持久层框架设计实现及MyBatis源码分析
</a></li><li class="dropdown-item"><!----> <a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html" class="nav-link">
  1.2.IoC容器设计实现及Spring源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/6-tools/OpenVPN/1-搭建-OpenVPN.html" class="nav-link">
  服务器搭建 OpenVPN
</a></li></ul></div></div><div class="nav-item"><a href="/6-tools/0-小工具集合.html" class="nav-link">
  集
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏀" class="dropdown-title"><span class="title">🏀</span> <span class="arrow down"></span></button> <button type="button" aria-label="🏀" class="mobile-dropdown-title"><span class="title">🏀</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/0-life/basketball/1-day1.html" class="nav-link">
  球性训练计划
</a></li></ul></div></div><div class="nav-item"><a href="/关于.html" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/5-up/第一阶段/1-Mybaits源码解析.html" class="sidebar-link">持久层框架实现及MyBatis源码分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/5-up/第一阶段/1-Mybaits源码解析.html#jdbc使用时的思考" class="sidebar-link">JDBC使用时的思考</a></li><li class="sidebar-sub-header"><a href="/5-up/第一阶段/1-Mybaits源码解析.html#自定义持久性框架设计" class="sidebar-link">自定义持久性框架设计</a></li><li class="sidebar-sub-header"><a href="/5-up/第一阶段/1-Mybaits源码解析.html#自定义持久框架核心-使用代理模式动态获取类执行dao" class="sidebar-link">自定义持久框架核心(使用代理模式动态获取类执行DAO)</a></li><li class="sidebar-sub-header"><a href="/5-up/第一阶段/1-Mybaits源码解析.html#mybaits的介绍和使用" class="sidebar-link">MyBaits的介绍和使用</a></li></ul></li><li><a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html" class="active sidebar-link">IoC容器设计及Spring源码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html#spring-基础概述" class="sidebar-link">Spring 基础概述</a></li><li class="sidebar-sub-header"><a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html#spring-优势" class="sidebar-link">Spring 优势</a></li><li class="sidebar-sub-header"><a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html#spring-核心思想" class="sidebar-link">Spring 核心思想</a></li><li class="sidebar-sub-header"><a href="/5-up/第一阶段/2-IoC容器设计及Spring源码.html#ioc-高级应用" class="sidebar-link">IoC 高级应用</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ioc容器设计及spring源码"><a href="#ioc容器设计及spring源码" class="header-anchor">#</a> IoC容器设计及Spring源码</h1> <p></p><div class="table-of-contents"><ul><li><a href="#spring-基础概述">Spring 基础概述</a></li><li><a href="#spring-优势">Spring 优势</a></li><li><a href="#spring-核心思想">Spring 核心思想</a><ul><li><a href="#ioc-inversion-of-control-控制反转">IoC：Inversion of Control  控制反转</a></li><li><a href="#ioc-解决的问题">IoC 解决的问题</a></li><li><a href="#ioc-控制反转-和di-依赖注入-的区别">IoC（控制反转）和DI（依赖注入）的区别</a></li><li><a href="#aop-aspect-oriented-programming-面向切面编程">AOP：Aspect oriented Programming 面向切面编程</a></li><li><a href="#aop-解决的问题">AOP 解决的问题</a></li></ul></li><li><a href="#ioc-高级应用">IoC 高级应用</a><ul><li><a href="#xml方式-xml-注解方式根据项目情况使用以下容器启动方式">XML方式，XML+注解方式根据项目情况使用以下容器启动方式：</a></li><li><a href="#纯注解模式">纯注解模式</a></li><li><a href="#beanfactory与applicationcontext区别">BeanFactory与ApplicationContext区别</a></li><li><a href="#ioc启动方式">IoC启动方式</a></li></ul></li></ul></div><p></p> <h2 id="spring-基础概述"><a href="#spring-基础概述" class="header-anchor">#</a> Spring 基础概述</h2> <p>Spring 开源分层，轻量级开源框架，以 IoC、AOP 为内核。提供了展现层 SpringMVC 和业务层事务管理等总舵的企业级应用技术。</p> <h2 id="spring-优势"><a href="#spring-优势" class="header-anchor">#</a> Spring 优势</h2> <ol><li>方便解耦，简化开发</li> <li>AOP编程支持</li> <li>声明式事务</li> <li>方便程序测试</li> <li>集成其他框架</li> <li>降低 JavaEE API 使用难度</li> <li>源码设计巧妙、结构清晰</li></ol> <h2 id="spring-核心思想"><a href="#spring-核心思想" class="header-anchor">#</a> Spring 核心思想</h2> <h3 id="ioc-inversion-of-control-控制反转"><a href="#ioc-inversion-of-control-控制反转" class="header-anchor">#</a> IoC：Inversion of Control  控制反转</h3> <p>IoC 控制反转，技术思想 Spring 对 Ioc 非常好的实现。控制是指对象的创建以及管理、反转是指将控制器交由 IoC。在 Spring IoC容器中不用自己去管理对象，在使用的时候IoC会帮我们去实例化它并且管理，不用考虑对象的创建和管理。</p> <p>举例 ClassA 依赖 ClassB，在非 IoC 容器情况下 ClassA 依赖 ClassB，实例化 ClassA 的同时也会在 ClassA 内部创建 ClassB。
IoC 容器可以看做是一个Map集合，在初始化时会实例化 ClassA，ClassB 并且存储起来。因为 ClassA 依赖 ClassB，也会將 ClassB 注入至 ClassA 当中。使用到的对象都会从 IoC 容器中获取，解决了Class 之间耦合的关系。</p> <h3 id="ioc-解决的问题"><a href="#ioc-解决的问题" class="header-anchor">#</a> IoC 解决的问题</h3> <p>Ioc 解决对象之间的耦合问题，配合面向接口开发增强项目的可扩展性（那是真的香</p> <h3 id="ioc-控制反转-和di-依赖注入-的区别"><a href="#ioc-控制反转-和di-依赖注入-的区别" class="header-anchor">#</a> IoC（控制反转）和DI（依赖注入）的区别</h3> <p>DI：Dependancy Injection 依赖注入，IoC 和 DI 做的其实是同一件事情（对象实例化、依赖关系维护）只是角度不同。IoC 是站在对象角度，对象实例化和管理的权利交给了容器，由容器来进行依赖关系的管理。DI是站在容器的角度，在实例化对象的时候容器会把对象所要依赖的其他对象注入到当前对象内。</p> <h3 id="aop-aspect-oriented-programming-面向切面编程"><a href="#aop-aspect-oriented-programming-面向切面编程" class="header-anchor">#</a> AOP：Aspect oriented Programming 面向切面编程</h3> <p>AOP 是 OOP 的延续，OOP 三大特征：封装、继承、多态。OOP 思想是一种垂直继承体系，可以解决多数代码重复的问题。但是有一些情况是处理不了的。</p> <p>在多个方法的相同位置出现了重复的代码被称为横切逻辑代码，常见的体现是在事务的控制、权限效验、日志打印。横切代码重复且与业务逻辑代码耦合在一起，不便于维护。AOP在不改变原有业务逻辑的情况下，把横切逻辑代码应用到业务逻辑中的。</p> <h3 id="aop-解决的问题"><a href="#aop-解决的问题" class="header-anchor">#</a> AOP 解决的问题</h3> <p>不改变业务逻辑的情况下，增强横切逻辑代码。根本上是解耦合避免横切逻辑代码的重复。</p> <h2 id="ioc-高级应用"><a href="#ioc-高级应用" class="header-anchor">#</a> IoC 高级应用</h2> <p>BeanFactory(IoC容器) 通过反射技术加载beans.xml配置文件，而 beans.xml 中描述了要实例化对象并维护对象之间的依赖关系。IoC 所需 beans 配置文件定义方式如下：</p> <ol><li>XML方式（bean信息定义全部配置在beans.xml中）</li> <li>注解方式（@bean，所有的bean都用注解来定义）</li> <li>XML+注解方式（部分bean定义在XML，部分bean使用注解定义）</li></ol> <h3 id="xml方式-xml-注解方式根据项目情况使用以下容器启动方式"><a href="#xml方式-xml-注解方式根据项目情况使用以下容器启动方式" class="header-anchor">#</a> XML方式，XML+注解方式根据项目情况使用以下容器启动方式：</h3> <ul><li>JavaSE应用：IoC容器通过ApplicationContext接口启动（加载beans.xml）<div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;beans.xml&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSystemXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\beans.xml&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li>JavaWeb应用：IoC 容器通过ContextLoaderListener（监听器加载xml）</li></ul> <h3 id="纯注解模式"><a href="#纯注解模式" class="header-anchor">#</a> 纯注解模式</h3> <ul><li>JavaSE应用：IoC 容器通过 ApplicationContext 接口启动（加载注解配置Class）<div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span>XX<span class="token punctuation">.</span><span class="token class-name">Class</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>JavaWeb应用：ContextLoaderListener（监听器加载注解配置类）</li></ul> <h3 id="beanfactory与applicationcontext区别"><a href="#beanfactory与applicationcontext区别" class="header-anchor">#</a> BeanFactory与ApplicationContext区别</h3> <ul><li>Beanfactory 为 SpreingIoC 的基础容器，ApplicationContext 是容器的高级接口。</li> <li>BeanFactory 是 Spring 框架中 IoC 容器的顶级接口，用以定义基础功能、规范。</li> <li>ApplicationContext 是 BeanFactory 的其中的一个子接口，所以拥有BeanFactory全部功能。</li> <li>BeanFactory 是 Spring 的基础设施，面向Spring框架本身；ApplicationContext 面向 Spring 框架开发者，几乎所有的应用场合都可以直接使用 ApplicationContext 。</li></ul> <p><img src="https://pic1.zhimg.com/v2-1006341abadfd3466b5b4587f349ab27_r.jpg?source=1940ef5c" alt=""></p> <h3 id="ioc启动方式"><a href="#ioc启动方式" class="header-anchor">#</a> IoC启动方式</h3> <h4 id="java环境启动ioc容器"><a href="#java环境启动ioc容器" class="header-anchor">#</a> Java环境启动IoC容器</h4> <ul><li>ClassPathXmlApplicationContext：从类的根路基下加载配置文件</li> <li>FileSystemXmlApplicationContext：磁盘绝对路径加载配置文件</li> <li>AnnotationConfigApplicationContext：纯注解模式下启动Spring容器</li></ul> <h4 id="web环境下启动ioc容器"><a href="#web环境下启动ioc容器" class="header-anchor">#</a> Web环境下启动IoC容器</h4> <ul><li><p>首先要引入Spring的web功能</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.12.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>XML方式启动</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
	<span class="token string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span>
	<span class="token string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--配置Spring ioc容器的配置⽂件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--使⽤监听器启动Spring的IOC容器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listenerclass</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listenerclass</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p>配置类启动</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
<span class="token string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span>
<span class="token string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--告诉ContextloaderListener知道我们使⽤注解的⽅式启动ioc容器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextClass<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.support.AnnotationConfigWebApplicationContext<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--配置启动类的全限定类名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>com.lagou.edu.SpringConfig<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--使⽤监听器启动Spring的IOC容器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listenerclass</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listenerclass</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul> <h4 id="xml模式"><a href="#xml模式" class="header-anchor">#</a> XML模式</h4></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/5-up/第一阶段/1-Mybaits源码解析.html" class="prev">
        持久层框架实现及MyBatis源码分析
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7efbe7ba.js" defer></script><script src="/assets/js/2.6911186c.js" defer></script><script src="/assets/js/20.e6073ffb.js" defer></script>
  </body>
</html>
