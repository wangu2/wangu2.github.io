<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4ï¼Œæ•´åˆå®˜æ–¹åœ¨çº¿è®¾è®¡å™¨ | YOU CAN DO IT @ WANGU</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.57b1b43f.css" as="style"><link rel="preload" href="/assets/js/app.7efbe7ba.js" as="script"><link rel="preload" href="/assets/js/2.6911186c.js" as="script"><link rel="preload" href="/assets/js/17.90f30f83.js" as="script"><link rel="prefetch" href="/assets/js/10.0dd62fe5.js"><link rel="prefetch" href="/assets/js/11.79010c3f.js"><link rel="prefetch" href="/assets/js/12.3e4763f5.js"><link rel="prefetch" href="/assets/js/13.7e1a5336.js"><link rel="prefetch" href="/assets/js/14.3fa1a476.js"><link rel="prefetch" href="/assets/js/15.f9994be5.js"><link rel="prefetch" href="/assets/js/16.289306ba.js"><link rel="prefetch" href="/assets/js/18.745e118b.js"><link rel="prefetch" href="/assets/js/19.bfba5612.js"><link rel="prefetch" href="/assets/js/20.e6073ffb.js"><link rel="prefetch" href="/assets/js/21.53c46aba.js"><link rel="prefetch" href="/assets/js/22.6918c566.js"><link rel="prefetch" href="/assets/js/23.bdb07654.js"><link rel="prefetch" href="/assets/js/24.2208129a.js"><link rel="prefetch" href="/assets/js/25.7bfd10bc.js"><link rel="prefetch" href="/assets/js/26.9d2bd670.js"><link rel="prefetch" href="/assets/js/3.b0fe903f.js"><link rel="prefetch" href="/assets/js/4.9b4a50d5.js"><link rel="prefetch" href="/assets/js/5.5f3bf129.js"><link rel="prefetch" href="/assets/js/6.defbe399.js"><link rel="prefetch" href="/assets/js/7.7077d182.js"><link rel="prefetch" href="/assets/js/8.8142661f.js"><link rel="prefetch" href="/assets/js/9.67779462.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57b1b43f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YOU CAN DO IT @ WANGU</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åŸºæœ¬çš„" class="dropdown-title"><span class="title">åŸºæœ¬çš„</span> <span class="arrow down"></span></button> <button type="button" aria-label="åŸºæœ¬çš„" class="mobile-dropdown-title"><span class="title">åŸºæœ¬çš„</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-base/java/java-oop.html" class="nav-link">
  Java åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Spring" class="dropdown-title"><span class="title">Java Spring</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Spring" class="mobile-dropdown-title"><span class="title">Java Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ç¼–è¾‘å™¨
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#2" class="nav-link">
  //TODO IntelliJ IDEA
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Boot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/2-java-spring/Spring/SpringBoot/IDEAåˆ›å»ºSpringBoot/1-idea-create-springboot.html" class="nav-link">
  Spring Boot - å¤šæ¨¡å—é¡¹ç›®åˆ›å»º
</a></li><li class="dropdown-subitem"><a href="/#3" class="nav-link">
  //TODO Spring Boot - Helloword
</a></li><li class="dropdown-subitem"><a href="/#4" class="nav-link">
  //TODO Spring Boot - å¤šé…ç½®æ–‡ä»¶
</a></li><li class="dropdown-subitem"><a href="/#5" class="nav-link">
  //TODO Spring Boot - LogBackæ—¥å¿—é…ç½®
</a></li><li class="dropdown-subitem"><a href="/#6" class="nav-link">
  //TODO Spring Boot - Swagger UI
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Security
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#7" class="nav-link">
  //TODO åˆå§‹åŒ–
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸­é—´ä»¶" class="dropdown-title"><span class="title">ä¸­é—´ä»¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="ä¸­é—´ä»¶" class="mobile-dropdown-title"><span class="title">ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/3-java-extends/ä¸­é—´ä»¶/RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶/1-RabbitMQ-setup.html" class="nav-link">
  RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—
</a></li><li class="dropdown-item"><!----> <a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html" class="nav-link">
  Activiti6 å·¥ä½œæµå¼•æ“
</a></li><li class="dropdown-item"><!----> <a href="/#8" class="nav-link">
  //TODO Shardingsphere åˆ†åº“åˆ†è¡¨
</a></li><li class="dropdown-item"><!----> <a href="/#9" class="nav-link">
  //TODO Mybaits-Plus ORM æ•°æ®æŒä¹…
</a></li><li class="dropdown-item"><!----> <a href="/#10" class="nav-link">
  //TODO Druid è¿æ¥æ± 
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç¿»è¿‡è¿™åº§å±±" class="dropdown-title"><span class="title">ç¿»è¿‡è¿™åº§å±±</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç¿»è¿‡è¿™åº§å±±" class="mobile-dropdown-title"><span class="title">ç¿»è¿‡è¿™åº§å±±</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/5-up/ç¬¬ä¸€é˜¶æ®µ/1-Mybaitsæºç è§£æ.html" class="nav-link">
  1.1.æŒä¹…å±‚æ¡†æ¶è®¾è®¡å®ç°åŠMyBatisæºç åˆ†æ
</a></li><li class="dropdown-item"><!----> <a href="/5-up/ç¬¬ä¸€é˜¶æ®µ/2-IoCå®¹å™¨è®¾è®¡åŠSpringæºç .html" class="nav-link">
  1.2.IoCå®¹å™¨è®¾è®¡å®ç°åŠSpringæºç åˆ†æ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·" class="dropdown-title"><span class="title">å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·¥å…·" class="mobile-dropdown-title"><span class="title">å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/6-tools/OpenVPN/1-æ­å»º-OpenVPN.html" class="nav-link">
  æœåŠ¡å™¨æ­å»º OpenVPN
</a></li></ul></div></div><div class="nav-item"><a href="/6-tools/0-å°å·¥å…·é›†åˆ.html" class="nav-link">
  é›†
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ€" class="dropdown-title"><span class="title">ğŸ€</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ€" class="mobile-dropdown-title"><span class="title">ğŸ€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/0-life/basketball/1-day1.html" class="nav-link">
  çƒæ€§è®­ç»ƒè®¡åˆ’
</a></li></ul></div></div><div class="nav-item"><a href="/å…³äº.html" class="nav-link">
  å…³äº
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åŸºæœ¬çš„" class="dropdown-title"><span class="title">åŸºæœ¬çš„</span> <span class="arrow down"></span></button> <button type="button" aria-label="åŸºæœ¬çš„" class="mobile-dropdown-title"><span class="title">åŸºæœ¬çš„</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/1-base/java/java-oop.html" class="nav-link">
  Java åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Spring" class="dropdown-title"><span class="title">Java Spring</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Spring" class="mobile-dropdown-title"><span class="title">Java Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          ç¼–è¾‘å™¨
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#2" class="nav-link">
  //TODO IntelliJ IDEA
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Boot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/2-java-spring/Spring/SpringBoot/IDEAåˆ›å»ºSpringBoot/1-idea-create-springboot.html" class="nav-link">
  Spring Boot - å¤šæ¨¡å—é¡¹ç›®åˆ›å»º
</a></li><li class="dropdown-subitem"><a href="/#3" class="nav-link">
  //TODO Spring Boot - Helloword
</a></li><li class="dropdown-subitem"><a href="/#4" class="nav-link">
  //TODO Spring Boot - å¤šé…ç½®æ–‡ä»¶
</a></li><li class="dropdown-subitem"><a href="/#5" class="nav-link">
  //TODO Spring Boot - LogBackæ—¥å¿—é…ç½®
</a></li><li class="dropdown-subitem"><a href="/#6" class="nav-link">
  //TODO Spring Boot - Swagger UI
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring Security
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/#7" class="nav-link">
  //TODO åˆå§‹åŒ–
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸­é—´ä»¶" class="dropdown-title"><span class="title">ä¸­é—´ä»¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="ä¸­é—´ä»¶" class="mobile-dropdown-title"><span class="title">ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/3-java-extends/ä¸­é—´ä»¶/RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶/1-RabbitMQ-setup.html" class="nav-link">
  RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—
</a></li><li class="dropdown-item"><!----> <a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html" class="nav-link">
  Activiti6 å·¥ä½œæµå¼•æ“
</a></li><li class="dropdown-item"><!----> <a href="/#8" class="nav-link">
  //TODO Shardingsphere åˆ†åº“åˆ†è¡¨
</a></li><li class="dropdown-item"><!----> <a href="/#9" class="nav-link">
  //TODO Mybaits-Plus ORM æ•°æ®æŒä¹…
</a></li><li class="dropdown-item"><!----> <a href="/#10" class="nav-link">
  //TODO Druid è¿æ¥æ± 
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç¿»è¿‡è¿™åº§å±±" class="dropdown-title"><span class="title">ç¿»è¿‡è¿™åº§å±±</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç¿»è¿‡è¿™åº§å±±" class="mobile-dropdown-title"><span class="title">ç¿»è¿‡è¿™åº§å±±</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/5-up/ç¬¬ä¸€é˜¶æ®µ/1-Mybaitsæºç è§£æ.html" class="nav-link">
  1.1.æŒä¹…å±‚æ¡†æ¶è®¾è®¡å®ç°åŠMyBatisæºç åˆ†æ
</a></li><li class="dropdown-item"><!----> <a href="/5-up/ç¬¬ä¸€é˜¶æ®µ/2-IoCå®¹å™¨è®¾è®¡åŠSpringæºç .html" class="nav-link">
  1.2.IoCå®¹å™¨è®¾è®¡å®ç°åŠSpringæºç åˆ†æ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·" class="dropdown-title"><span class="title">å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·¥å…·" class="mobile-dropdown-title"><span class="title">å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/6-tools/OpenVPN/1-æ­å»º-OpenVPN.html" class="nav-link">
  æœåŠ¡å™¨æ­å»º OpenVPN
</a></li></ul></div></div><div class="nav-item"><a href="/6-tools/0-å°å·¥å…·é›†åˆ.html" class="nav-link">
  é›†
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ€" class="dropdown-title"><span class="title">ğŸ€</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ€" class="mobile-dropdown-title"><span class="title">ğŸ€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/0-life/basketball/1-day1.html" class="nav-link">
  çƒæ€§è®­ç»ƒè®¡åˆ’
</a></li></ul></div></div><div class="nav-item"><a href="/å…³äº.html" class="nav-link">
  å…³äº
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html" class="sidebar-link">1ï¼Œå¼€å§‹é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html#å¼€å§‹" class="sidebar-link">å¼€å§‹</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html#ä¾èµ–-pom-xml" class="sidebar-link">ä¾èµ– pom.xml</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html#é…ç½®-rescource" class="sidebar-link">é…ç½® Rescource</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html#é…ç½®-application-yml" class="sidebar-link">é…ç½® application.yml</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html#é…ç½®-springbootapplication" class="sidebar-link">é…ç½® SpringBootApplication</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/1-springboot-activit-star.html#åˆå§‹åŒ–" class="sidebar-link">åˆå§‹åŒ–</a></li></ul></li><li><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/2-activiti-context.html" class="sidebar-link">2ï¼ŒActivitiä»‹ç»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/2-activiti-context.html#activitiæ ¸å¿ƒæœåŠ¡æ¥å£" class="sidebar-link">Activitiæ ¸å¿ƒæœåŠ¡æ¥å£</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/2-activiti-context.html#activitiè¡¨" class="sidebar-link">Activitiè¡¨</a></li></ul></li><li><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html" class="sidebar-link">3ï¼Œç®€å•çš„å¼€å§‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html#bpmnç›®å½•" class="sidebar-link">BPMNç›®å½•</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html#å®‰è£…æ’ä»¶" class="sidebar-link">å®‰è£…æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html#ç»˜åˆ¶æµç¨‹" class="sidebar-link">ç»˜åˆ¶æµç¨‹</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html#ä¹±ç é—®é¢˜" class="sidebar-link">ä¹±ç é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html#æµç¨‹å¼€å§‹" class="sidebar-link">æµç¨‹å¼€å§‹</a></li></ul></li><li><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html" class="active sidebar-link">4ï¼Œæ•´åˆå®˜æ–¹åœ¨çº¿è®¾è®¡å™¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#ä¸‹è½½æºç " class="sidebar-link">ä¸‹è½½æºç </a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#åœ¨çº¿è®¾è®¡æºç " class="sidebar-link">åœ¨çº¿è®¾è®¡æºç </a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#è®¾è®¡å™¨åå°æºç " class="sidebar-link">è®¾è®¡å™¨åå°æºç </a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#ä¿®æ”¹å¼•å…¥æ–‡ä»¶" class="sidebar-link">ä¿®æ”¹å¼•å…¥æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#åœ¨çº¿è®¾è®¡å™¨æ±‰åŒ–" class="sidebar-link">åœ¨çº¿è®¾è®¡å™¨æ±‰åŒ–</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#å…³ç³»è¯´æ˜" class="sidebar-link">å…³ç³»è¯´æ˜</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#å¯¹æ¥åœ¨çº¿è®¾è®¡å™¨" class="sidebar-link">å¯¹æ¥åœ¨çº¿è®¾è®¡å™¨</a></li><li class="sidebar-sub-header"><a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/4-springboot-activiti-ui.html#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_4-æ•´åˆå®˜æ–¹åœ¨çº¿è®¾è®¡å™¨"><a href="#_4-æ•´åˆå®˜æ–¹åœ¨çº¿è®¾è®¡å™¨" class="header-anchor">#</a> 4ï¼Œæ•´åˆå®˜æ–¹åœ¨çº¿è®¾è®¡å™¨</h1> <h2 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="header-anchor">#</a> ä¸‹è½½æºç </h2> <p>ä»¥å‰å‡ ç« ä¸ºåŸºç¡€æ•´åˆå®˜æ–¹çš„åœ¨çº¿è®¾è®¡å™¨ï¼Œè¿™é‡Œä½¿ç”¨5.22ç‰ˆæœ¬çš„è®¾è®¡å™¨ä»£ç ã€‚</p> <p>æ‰“å¼€åœ°å€ï¼šhttps://www.activiti.org/get-startedï¼Œé€‰æ‹© Activiti 5.x Downloadè¿›è¡Œä¸‹è½½ã€‚</p> <p>ä¸‹åˆ—ä¸¤ä¸ªä¸ºå½“å‰è¦ä½¿ç”¨åˆ°çš„æ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>- activiti-5.22.0\wars\activiti-explorer.war
- activiti-5.22.0\libs\activiti-modeler-5.22.0-sources.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="åœ¨çº¿è®¾è®¡æºç "><a href="#åœ¨çº¿è®¾è®¡æºç " class="header-anchor">#</a> åœ¨çº¿è®¾è®¡æºç </h2> <ol><li>è§£å‹WaråŒ… activiti-explorer.war ï¼ˆåœ¨çº¿è®¾è®¡æºç ï¼‰</li> <li>å°†åŒ…è§£å‹å†… diagram-viewerã€editor-appã€modeler.html æ”¾å…¥SpringBooté™æ€èµ„æºå†…ä»¥ç›´æ¥è®¿é—®</li></ol> <p><img src="/img/image-20200705233655122.png" alt="image-20200705233655122"></p> <h2 id="è®¾è®¡å™¨åå°æºç "><a href="#è®¾è®¡å™¨åå°æºç " class="header-anchor">#</a> è®¾è®¡å™¨åå°æºç </h2> <p>å¼€å§‹æå–æ–‡ä»¶ï¼Œè§£å‹activiti-modeler-5.22.0-sources.jarï¼Œæ‰“å¼€æ–‡ä»¶ä½ç½®</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ç›®å½•ï¼šactiviti-modeler-5.22.0-sources.jarorg\activiti\rest\editor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>æ–‡ä»¶<span class="token number">1</span>ï¼š\main\StencilsetRestResource<span class="token punctuation">.</span>java ï¼ˆç”¨ä»¥æ±‰åŒ–ï¼‰

æ–‡ä»¶<span class="token number">2</span>ï¼š\model\ModelEditorJsonRestResource<span class="token punctuation">.</span>java ï¼ˆç¼–è¾‘å·¥ä½œæµæ¨¡å‹ï¼‰

æ–‡ä»¶<span class="token number">3</span>ï¼š\model\ModelSaveRestResource<span class="token punctuation">.</span>javaï¼ˆä¿å­˜å·¥ä½œæµæ¨¡å‹ï¼‰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¯¥ä¸‰ä¸ªæ–‡ä»¶å°†æ˜¯åœ¨çº¿è®¾è®¡å™¨è¦è¯·æ±‚çš„ä½¿ç”¨çš„RESTï¼Œæ‰€ä»¥å°†å…¶å¼•å…¥é¡¹ç›®ä¸­åœ¨çº¿è®¾è®¡å™¨ã€‚</p> <p>æ­¤æ—¶é¡¹ç›®ä¼šæŠ¥é”™ç¼ºå°‘jarï¼Œpomåœ¨å¯¹åº”èŠ‚ç‚¹æ·»åŠ ä»¥ä¸‹ç±»åº“ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- ç»Ÿä¸€ç‰ˆæœ¬ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activiti.version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activiti.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmlgraphics.version</span><span class="token punctuation">&gt;</span></span>1.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmlgraphics.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Activiti6.0 ç›¸å…³ç±»åº“ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-spring-boot-starter-basic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${activiti.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-json-converter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${activiti.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-bpmn-model<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- xml å›¾åƒç±»åº“ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.xmlgraphics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>batik-codec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${xmlgraphics.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.xmlgraphics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>batik-css<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${xmlgraphics.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.xmlgraphics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>batik-svg-dom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${xmlgraphics.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.xmlgraphics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>batik-svggen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${xmlgraphics.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="ä¿®æ”¹å¼•å…¥æ–‡ä»¶"><a href="#ä¿®æ”¹å¼•å…¥æ–‡ä»¶" class="header-anchor">#</a> ä¿®æ”¹å¼•å…¥æ–‡ä»¶</h2> <h3 id="java-æ–‡ä»¶ä¿®æ”¹"><a href="#java-æ–‡ä»¶ä¿®æ”¹" class="header-anchor">#</a> *.java æ–‡ä»¶ä¿®æ”¹</h3> <p>ä¸Šè¿°æåˆ°çš„3ä¸ªæ–‡ä»¶æ˜¯åœ¨çº¿è®¾è®¡å™¨ä¼šä½¿ç”¨åˆ°çš„RESTèµ„æº</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>StencilsetRestResource.java ï¼ˆç”¨ä»¥æ±‰åŒ–ï¼‰

ModelEditorJsonRestResource.java ï¼ˆç¼–è¾‘å·¥ä½œæµæ¨¡å‹ï¼‰

ModelSaveRestResource.javaï¼ˆä¿å­˜å·¥ä½œæµæ¨¡å‹ï¼‰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œä¸ºæ–‡ä»¶ç»Ÿä¸€åŠ ä¸Šäº† /activiti-explorerï¼Œï¼ˆè‹¥æœ‰æƒé™æ§åˆ¶éœ€è¦å°†åœ°å€è¿›è¡Œè¿‡æ»¤ï¼‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/activiti-explorer&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="modelsaverestresource-java-æ–‡ä»¶ä¿®æ”¹"><a href="#modelsaverestresource-java-æ–‡ä»¶ä¿®æ”¹" class="header-anchor">#</a> ModelSaveRestResource.java æ–‡ä»¶ä¿®æ”¹</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveModel</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> modelId<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">,</span> <span class="token class-name">String</span> json_xml<span class="token punctuation">,</span> <span class="token class-name">String</span> svg_xml<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      
      <span class="token class-name">Model</span> model <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span>modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token class-name">ObjectNode</span> modelJson <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ObjectNode</span><span class="token punctuation">)</span> objectMapper<span class="token punctuation">.</span><span class="token function">readTree</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">getMetaInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      modelJson<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>MODEL_NAME<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      modelJson<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>MODEL_DESCRIPTION<span class="token punctuation">,</span> desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
      model<span class="token punctuation">.</span><span class="token function">setMetaInfo</span><span class="token punctuation">(</span>modelJson<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      model<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      repositoryService<span class="token punctuation">.</span><span class="token function">saveModel</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
      repositoryService<span class="token punctuation">.</span><span class="token function">addModelEditorSource</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> json_xml<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token class-name">InputStream</span> svgStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>svg_xml<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">TranscoderInput</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TranscoderInput</span><span class="token punctuation">(</span>svgStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token class-name">PNGTranscoder</span> transcoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PNGTranscoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Setup output</span>
      <span class="token class-name">ByteArrayOutputStream</span> outStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">TranscoderOutput</span> output <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TranscoderOutput</span><span class="token punctuation">(</span>outStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token comment">// Do the transformation</span>
      transcoder<span class="token punctuation">.</span><span class="token function">transcode</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> outStream<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      repositoryService<span class="token punctuation">.</span><span class="token function">addModelEditorSourceExtra</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      outStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error saving model&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ActivitiException</span><span class="token punctuation">(</span><span class="token string">&quot;Error saving model&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>ä½¿ç”¨ä»¥ä¸Šå‡½æ•°æ›¿æ¢è¯¥æ–‡ä»¶ä¸­çš„å‡½æ•°å†…å®¹</p> <h3 id="js-æ–‡ä»¶ä¿®æ”¹"><a href="#js-æ–‡ä»¶ä¿®æ”¹" class="header-anchor">#</a> *.js æ–‡ä»¶ä¿®æ”¹</h3> <p>Activiti6åœ¨çº¿è®¾è®¡å™¨æ˜¯Angularè¿›è¡Œç¼–å†™çš„ï¼Œé€šè¿‡ä¸Šé¢æ“ä½œRESTæ¥å£å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼ŒJsé…ç½®éœ€è¦è¿›è¡Œç»Ÿä¸€ã€‚</p> <p>ä¿®æ”¹ä¹‹å‰åœ¨é™æ€ç›®å½•ä¸­å¼•å…¥æºæ–‡ä»¶ï¼Œä¿®æ”¹ \editor-app\app-cfg.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token constant">ACTIVITI</span> <span class="token operator">=</span> <span class="token constant">ACTIVITI</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token constant">ACTIVITI</span><span class="token punctuation">.</span><span class="token constant">CONFIG</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">'contextRoot'</span> <span class="token operator">:</span> <span class="token string">'/activiti-explorer'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="åœ¨çº¿è®¾è®¡å™¨æ±‰åŒ–"><a href="#åœ¨çº¿è®¾è®¡å™¨æ±‰åŒ–" class="header-anchor">#</a> åœ¨çº¿è®¾è®¡å™¨æ±‰åŒ–</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>StencilsetRestResource.java ï¼ˆè¯­è¨€åŒ…ï¼‰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * @author Tijs Rademakers
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/activiti-explorer&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StencilsetRestResource</span> <span class="token punctuation">{</span>
  
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/editor/stencilset&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token annotation punctuation">@ResponseBody</span> <span class="token class-name">String</span> <span class="token function">getStencilset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> stencilsetStream <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;stencilset.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>stencilsetStream<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ActivitiException</span><span class="token punctuation">(</span><span class="token string">&quot;Error while loading stencil set&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>é€šè¿‡æºç å¯ä»¥çœ‹å‡ºä¼šè¯»å–æ–‡ä»¶ stencilset.json ï¼Œæ‰€ä»¥åªè¦æ–‡ä»¶æ”¾å…¥å½“å‰Resourceæ ¹ç›®å½•å³å¯</p> <h2 id="å…³ç³»è¯´æ˜"><a href="#å…³ç³»è¯´æ˜" class="header-anchor">#</a> å…³ç³»è¯´æ˜</h2> <p>ä»¥ä¸Šæ˜¯æ•´åˆå®˜ç½‘çš„åœ¨çº¿è®¾è®¡å™¨ï¼Œå¯ä»¥åœ¨çº¿ç»˜å›¾ã€éƒ¨ç½²å’Œç®¡ç†ã€‚ç›¸è¾ƒä¸åœ¨IDEç»˜å›¾ï¼Œä»£ç å‘å¸ƒè¾ƒä¸ºä¾¿æ·å¾ˆå¤šã€‚</p> <p>è¿™ç« èŠ‚åªæ˜¯å¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œå¦‚æœè¦åœ¨é¡¹ç›®ä¸­è¿›è¡Œä½¿ç”¨è¿˜éœ€è¦è‡ªå·±å†å®ç°ï¼Œåé¢å°†ç¼–å†™ä¸€ä¸ªControllerä¸è®¾è®¡å™¨è¿›è¡Œå¯¹æ¥ã€‚</p> <h2 id="å¯¹æ¥åœ¨çº¿è®¾è®¡å™¨"><a href="#å¯¹æ¥åœ¨çº¿è®¾è®¡å™¨" class="header-anchor">#</a> å¯¹æ¥åœ¨çº¿è®¾è®¡å™¨</h2> <p>åˆ›å»ºControlleræ•´åˆActivitiè®¾è®¡å™¨ï¼Œindexæ¨¡æ¿</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/activitiExample&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActivitiExampleController</span> <span class="token punctuation">{</span>

    <span class="token comment">//æ—¥å¿—</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">ActivitiExampleController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//æµç¨‹æœåŠ¡ç»„ä»¶ï¼šç”¨äºæµç¨‹å®šä¹‰å’Œå­˜å–</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">;</span>

    <span class="token comment">//å†å²æœåŠ¡ç»„ä»¶ï¼šç”¨äºè·å–æ­£åœ¨è¿è¡Œæˆ–å·²ç»å®Œæˆçš„æµç¨‹å®ä¾‹çš„ä¿¡æ¯</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">HistoryService</span> historyService<span class="token punctuation">;</span>

    <span class="token comment">//è¿è¡Œæ—¶æœåŠ¡ç»„ä»¶ï¼šæä¾›äº†å¯åŠ¨æµç¨‹ã€æŸ¥è¯¢æµç¨‹å®ä¾‹ã€è®¾ç½®è·å–æµç¨‹å®ä¾‹å˜é‡ç­‰åŠŸèƒ½ã€‚</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RuntimeService</span> runtimeService<span class="token punctuation">;</span>

    <span class="token comment">//æ•°æ®æ¨¡å‹è½¬æ¢</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>

    <span class="token comment">/**
     * é¦–é¡µæ§åˆ¶å™¨ï¼šè·å–å·¥ä½œæµæ¨¡å‹åˆ—è¡¨æ§åˆ¶å™¨
     *
     * @param modelAndView é¡µé¢å¯¹è±¡
     * @return è¿”å›é¡µé¢å¯¹è±¡
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;activiti/index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é€šè¿‡æµç¨‹æœåŠ¡ç»„ä»¶è·å–å½“å‰çš„å·¥ä½œæµæ¨¡å‹åˆ—è¡¨</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Model</span><span class="token punctuation">&gt;</span></span> actList <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createModelQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;actList&quot;</span><span class="token punctuation">,</span> actList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * è·³è½¬ç¼–è¾‘å™¨/ç¼–è¾‘å·¥ä½œæµé¡µé¢
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/editor&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">editor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;activiti/modeler&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * åˆ›å»ºæ¨¡å‹
     *
     * @param response
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/create&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºä¸€ä¸ªç©ºæ¨¡å‹</span>
        <span class="token class-name">Model</span> model <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">newModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è®¾ç½®ä¸€ä¸‹é»˜è®¤ä¿¡æ¯</span>
        <span class="token class-name">String</span> modelName <span class="token operator">=</span> <span class="token string">&quot;new-model&quot;</span><span class="token punctuation">;</span><span class="token comment">//æ¨¡å‹åç§°</span>
        <span class="token class-name">String</span> modelKey <span class="token operator">=</span> <span class="token string">&quot;new-key&quot;</span><span class="token punctuation">;</span><span class="token comment">// æ¨¡å‹key</span>
        <span class="token class-name">String</span> modelDescription <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//æ¨¡å‹æè¿°</span>
        <span class="token keyword">int</span> modelVersion <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//é»˜è®¤ç‰ˆæœ¬å·</span>


        <span class="token class-name">ObjectNode</span> modelNode <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">createObjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">ModelDataJsonConstants</span><span class="token punctuation">.</span>MODEL_NAME<span class="token punctuation">,</span> modelName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">ModelDataJsonConstants</span><span class="token punctuation">.</span>MODEL_DESCRIPTION<span class="token punctuation">,</span> modelDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">ModelDataJsonConstants</span><span class="token punctuation">.</span>MODEL_REVISION<span class="token punctuation">,</span> modelVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>modelName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">setKey</span><span class="token punctuation">(</span>modelKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">setMetaInfo</span><span class="token punctuation">(</span>modelNode<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        repositoryService<span class="token punctuation">.</span><span class="token function">saveModel</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">createObjectNode</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/activitiExample/editor?modelId=&quot;</span> <span class="token operator">+</span> model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºæ¨¡å‹ç»“æŸï¼Œè¿”å›æ¨¡å‹IDï¼š{}&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * åˆ›å»ºæ¨¡å‹æ—¶å®Œå–„ModelEditorSource
     *
     * @param modelId
     */</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;/deprecation&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">createObjectNode</span><span class="token punctuation">(</span><span class="token class-name">String</span> modelId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºæ¨¡å‹å®Œå–„ModelEditorSourceå…¥å‚æ¨¡å‹IDï¼š{}&quot;</span><span class="token punctuation">,</span> modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectNode</span> editorNode <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">createObjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editorNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editorNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;resourceId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectNode</span> stencilSetNode <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">createObjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stencilSetNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;namespace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://b3mn.org/stencilset/bpmn2.0#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editorNode<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;stencilset&quot;</span><span class="token punctuation">,</span> stencilSetNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            repositoryService<span class="token punctuation">.</span><span class="token function">addModelEditorSource</span><span class="token punctuation">(</span>modelId<span class="token punctuation">,</span> editorNode<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºæ¨¡å‹æ—¶å®Œå–„ModelEditorSourceæœåŠ¡å¼‚å¸¸ï¼š{}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºæ¨¡å‹å®Œå–„ModelEditorSourceç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘å¸ƒæµç¨‹
     *
     * @param modelId æ¨¡å‹ID
     * @return
     */</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/publish&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token class-name">String</span> modelId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹éƒ¨ç½²å…¥å‚modelIdï¼š{}&quot;</span><span class="token punctuation">,</span> modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Model</span> modelData <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span>modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">getModelEditorSource</span><span class="token punctuation">(</span>modelData<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>bytes <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;éƒ¨ç½²ID:{}çš„æ¨¡å‹æ•°æ®ä¸ºç©ºï¼Œè¯·å…ˆè®¾è®¡æµç¨‹å¹¶æˆåŠŸä¿å­˜ï¼Œå†è¿›è¡Œå‘å¸ƒ&quot;</span><span class="token punctuation">,</span> modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FAILURE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> map<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">JsonNode</span> modelNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readTree</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BpmnModel</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BpmnJsonConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">convertToBpmnModel</span><span class="token punctuation">(</span>modelNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Deployment</span> deployment <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>modelData<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">addBpmnModel</span><span class="token punctuation">(</span>modelData<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.bpmn20.xml&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            modelData<span class="token punctuation">.</span><span class="token function">setDeploymentId</span><span class="token punctuation">(</span>deployment<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            repositoryService<span class="token punctuation">.</span><span class="token function">saveModel</span><span class="token punctuation">(</span>modelData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;éƒ¨ç½²modelId:{}æ¨¡å‹æœåŠ¡å¼‚å¸¸ï¼š{}&quot;</span><span class="token punctuation">,</span> modelId<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FAILURE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹éƒ¨ç½²å‡ºå‚mapï¼š{}&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’¤é”€æµç¨‹å®šä¹‰
     *
     * @param modelId æ¨¡å‹ID
     * @return
     */</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/revokePublish&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">revokePublish</span><span class="token punctuation">(</span><span class="token class-name">String</span> modelId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ’¤é”€å‘å¸ƒæµç¨‹å…¥å‚modelIdï¼š{}&quot;</span><span class="token punctuation">,</span> modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Model</span> modelData <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span>modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> modelData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">/**
                 * å‚æ•°ä¸åŠ true:ä¸ºæ™®é€šåˆ é™¤ï¼Œå¦‚æœå½“å‰è§„åˆ™ä¸‹æœ‰æ­£åœ¨æ‰§è¡Œçš„æµç¨‹ï¼Œåˆ™æŠ›å¼‚å¸¸
                 * å‚æ•°åŠ true:ä¸ºçº§è”åˆ é™¤,ä¼šåˆ é™¤å’Œå½“å‰è§„åˆ™ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬å†å²
                 */</span>
                repositoryService<span class="token punctuation">.</span><span class="token function">deleteDeployment</span><span class="token punctuation">(</span>modelData<span class="token punctuation">.</span><span class="token function">getDeploymentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ’¤é”€å·²éƒ¨ç½²æµç¨‹æœåŠ¡å¼‚å¸¸ï¼š{}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FAILURE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ’¤é”€å‘å¸ƒæµç¨‹å‡ºå‚mapï¼š{}&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * åˆ é™¤æµç¨‹å®ä¾‹
     *
     * @param modelId æ¨¡å‹ID
     * @return
     */</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">deleteProcessInstance</span><span class="token punctuation">(</span><span class="token class-name">String</span> modelId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ é™¤æµç¨‹å®ä¾‹å…¥å‚modelIdï¼š{}&quot;</span><span class="token punctuation">,</span> modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Model</span> modelData <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span>modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> modelData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">//å…ˆåˆ é™¤æµç¨‹å®ä¾‹ï¼Œå†åˆ é™¤å·¥ä½œæµæ¨¡å‹</span>
                <span class="token class-name">ProcessInstance</span> pi <span class="token operator">=</span> runtimeService<span class="token punctuation">.</span><span class="token function">createProcessInstanceQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                        <span class="token function">processDefinitionKey</span><span class="token punctuation">(</span>modelData<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">singleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> pi<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    runtimeService<span class="token punctuation">.</span><span class="token function">deleteProcessInstance</span><span class="token punctuation">(</span>pi<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    historyService<span class="token punctuation">.</span><span class="token function">deleteHistoricProcessInstance</span><span class="token punctuation">(</span>pi<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//åˆ é™¤æµç¨‹æ¨¡å‹</span>
                repositoryService<span class="token punctuation">.</span><span class="token function">deleteModel</span><span class="token punctuation">(</span>modelId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ é™¤æµç¨‹å®ä¾‹æœåŠ¡å¼‚å¸¸ï¼š{}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FAILURE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ é™¤æµç¨‹å®ä¾‹å‡ºå‚mapï¼š{}&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>å·¥ä½œæµæ¨¡å‹åˆ—è¡¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- è¿™é‡Œè®¾å®šäº†é¡¹ç›®æ ¹è·¯å¾„,åé¢ä½¿ç”¨åˆ°è·¯å¾„çš„åœ°æ–¹æ­£å¸¸å¡«å†™å³å¯ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${#request.getContextPath()}+<span class="token punctuation">'</span>/<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/bootstrap.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/jquery-3.5.1.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/bootstrap.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel panel-default<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin</span><span class="token punctuation">:</span> 10px</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-heading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å·¥ä½œæµç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/activitiExample/create<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-default<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Left Align<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                åˆ›å»ºæ¨¡å‹
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ¨¡å‹ç¼–å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‰ˆæœ¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ¨¡å‹key<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ¨¡å‹åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ“ä½œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actModel,actStat:${actList}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${actModel.id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${actModel.version}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${actModel.key}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${actModel.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{<span class="token punctuation">'</span>/activitiExample/publish?modelId=<span class="token punctuation">'</span>+${actModel.id}}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>éƒ¨ç½²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{<span class="token punctuation">'</span>/activitiExample/revokePublish?modelId=<span class="token punctuation">'</span>+${actModel.id}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ’¤é”€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{<span class="token punctuation">'</span>/activitiExample/editor?modelId=<span class="token punctuation">'</span>+${actModel.id}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç¼–è¾‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{<span class="token punctuation">'</span>/activitiExample/delete?modelId=<span class="token punctuation">'</span>+${actModel.id}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p><img src="/img/image-20200706173135023.png" alt="image-20200706173135023"></p> <p><img src="/img/image-20200706173233359.png" alt="image-20200706173233359"></p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>æ‰€æœ‰ç« èŠ‚éƒ½ä¸ºç®€å•ç¤ºä¾‹ï¼Œæ–¹ä¾¿å¿«é€Ÿå…¥é—¨ä¸äº†è§£</p> <p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒActivitiæœ‰è‡ªèº«çš„ä¸€å¥—ç”¨æˆ·ç®¡ç†ï¼Œéœ€è¦å’Œè‡ªèº«ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œå…³è”ã€æˆ–è€…åšä¸€è‡´æ“ä½œã€‚</p> <ol><li>ç¼–å†™æµç¨‹ï¼šé’ˆå¯¹å½“å‰çš„ä¸šåŠ¡å»åˆ›å»ºåˆç†çš„æµç¨‹ï¼ˆåˆ¤æ–­æ¡ä»¶ï¼Œä¼šç­¾ï¼Œå›é€€ç­‰ä¸€äº›æµç¨‹æ“ä½œï¼‰</li> <li>å‘å¸ƒæµç¨‹ï¼šå¯¹å½“å‰çš„ä¸šåŠ¡æµç¨‹è¿›è¡Œå‘å¸ƒï¼ˆå‘å¸ƒåæ‰å¯ä»¥è¿›è¡Œè°ƒç”¨å’Œå¯åŠ¨ï¼‰</li> <li>å¯åŠ¨æµç¨‹ï¼šä¸šåŠ¡è¡¨å•å¡«å†™å®Œæ¯•åï¼Œæ ¹æ®æµç¨‹æ ‡è¯†è¿›è¡Œå¯åŠ¨æµç¨‹</li> <li>è·å–ä»»åŠ¡ï¼šè·å–å½“å‰çš„ç”¨æˆ·æ‰€å¯æ“ä½œçš„ä»»åŠ¡åˆ—è¡¨</li> <li>ä»»åŠ¡åŠç»“ï¼šæ ¹æ®ä»»åŠ¡idè¿›è¡Œä»»åŠ¡çš„å®Œæˆï¼Œåè¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹èŠ‚ç‚¹æˆ–è€…ç»“æŸ</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/3-java-extends/ä¸­é—´ä»¶/SpringBoot2.0é›†æˆActiviti6/3-springboot-activiti-create.html" class="prev">
        3ï¼Œç®€å•çš„å¼€å§‹
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7efbe7ba.js" defer></script><script src="/assets/js/2.6911186c.js" defer></script><script src="/assets/js/17.90f30f83.js" defer></script>
  </body>
</html>
